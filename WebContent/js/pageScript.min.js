function topPageScripts(){console.log("call: topPageScripts");let newsSwiper=new Swiper("#news-swiper",{effect:"slide",spaceBetween:"1%",speed:300,slidesPerView:4,preloadImages:false,breakpoints:{600:{slidesPerView:2,spaceBetween:0},960:{slidesPerView:3}},pagination:{el:".news-swiper-pagination",type:"bullets",clickable:true},navigation:{nextEl:".news-swiper-next",prevEl:".news-swiper-prev"}});$("#news-swiper a").each(function(){if($(this).hasClass("new")){$(this).append('<div class="new"><span>NEW</span></div>')}});let storySwiper=new Swiper("#story-swiper",{effect:"coverflow",grabCursor:true,centeredSlides:true,slidesPerView:3,coverflowEffect:{rotate:50,stretch:0,depth:300,modifier:1,slideShadows:true},breakpoints:{960:{slidesPerView:2}},navigation:{nextEl:".story-swiper-next",prevEl:".story-swiper-prev"}});storySwiper.slideTo(1,0)}function newsPageScripts(){console.log("call: newsPageScripts");$(".news-wrap a").each(function(){if($(this).hasClass("new")){$(this).append('<div class="new"><span>NEW</span></div>')}});webCampaign()}function storyPageScripts(){console.log("call: storyPageScripts");if($("#story-index-swiper").length){let storyIndexSwiper=new Swiper("#story-index-swiper",{effect:"coverflow",grabCursor:true,centeredSlides:true,slidesPerView:3,coverflowEffect:{rotate:50,stretch:0,depth:300,modifier:1,slideShadows:true},breakpoints:{960:{slidesPerView:2}},navigation:{nextEl:".story-index-swiper-next",prevEl:".story-index-swiper-prev"}});storyIndexSwiper.slideTo(2,0)}$(".hex").each(function(){$(this).text(hex($(this).text()))});if($("#chara-swiper").length){let charaSwiper=new Swiper("#chara-swiper",{effect:"fade",speed:500,navigation:{nextEl:".chara-swiper-next",prevEl:".chara-swiper-prev"},fadeEffect:{crossFade:true},preloadImages:false,lazy:{loadPrevNext:true}});charaSwiper.on("slideChange",function(){let idx=this.activeIndex;$(".chara-nav a").each(function(){$(this).removeClass("active")});$(".chara-nav a").eq(idx).addClass("active")});$("#chara-nav-crossbell a").on("click",function(a){a.preventDefault();let idx=$(this).index(".chara-nav a");$("html, body").animate({scrollTop:$("#chara-swiper").offset().top},500,SCROLL_EASING);charaSwiper.slideTo(idx)})}if($("#chara-erebonia-swiper").length){let charaSwiper=new Swiper("#chara-erebonia-swiper",{effect:"fade",speed:500,navigation:{nextEl:".chara-swiper-next",prevEl:".chara-swiper-prev"},fadeEffect:{crossFade:true},preloadImages:false,lazy:{loadPrevNext:true}});charaSwiper.on("slideChange",function(){let idx=this.activeIndex;$(".chara-nav a").each(function(){$(this).removeClass("active")});$(".chara-nav a").eq(idx).addClass("active")});$("#chara-nav-erebonia a").on("click",function(a){a.preventDefault();let idx=$(this).index(".chara-nav a");$("html, body").animate({scrollTop:$("#chara-erebonia-swiper").offset().top},500,SCROLL_EASING);charaSwiper.slideTo(idx)})}if($("#chara-sinners-swiper").length){let charaSwiper=new Swiper("#chara-sinners-swiper",{effect:"fade",speed:500,navigation:{nextEl:".chara-swiper-next",prevEl:".chara-swiper-prev"},fadeEffect:{crossFade:true},preloadImages:false,lazy:{loadPrevNext:true}});charaSwiper.on("slideChange",function(){let idx=this.activeIndex;$(".chara-nav a").each(function(){$(this).removeClass("active")});$(".chara-nav a").eq(idx).addClass("active")});$("#chara-nav-sinners a").on("click",function(a){a.preventDefault();let idx=$(this).index(".chara-nav a");$("html, body").animate({scrollTop:$("#chara-sinners-swiper").offset().top},500,SCROLL_EASING);charaSwiper.slideTo(idx)})}if($("#episode-chara-swiper").length){let charaSwiper=new Swiper("#episode-chara-swiper",{effect:"fade",speed:500,navigation:{nextEl:".chara-swiper-next",prevEl:".chara-swiper-prev"},fadeEffect:{crossFade:true},preloadImages:false,lazy:{loadPrevNext:true}});charaSwiper.on("slideChange",function(){let idx=this.activeIndex;$(".chara-nav a").each(function(){$(this).removeClass("active")});$(".chara-nav a").eq(idx).addClass("active")});$("#chara-nav-episode a").on("click",function(a){a.preventDefault();let idx=$(this).index(".chara-nav a");$("html, body").animate({scrollTop:$("#episode-chara-swiper").offset().top},500,SCROLL_EASING);charaSwiper.slideTo(idx)})}if($("#seven-chara-swiper").length){let charaSwiper=new Swiper("#seven-chara-swiper",{effect:"fade",speed:500,navigation:{nextEl:".chara-swiper-next",prevEl:".chara-swiper-prev"},fadeEffect:{crossFade:true},preloadImages:false,lazy:{loadPrevNext:true}});charaSwiper.on("slideChange",function(){let idx=this.activeIndex;$(".chara-nav a").each(function(){$(this).removeClass("active")});$(".chara-nav a").eq(idx).addClass("active")});$("#chara-nav-seven a").on("click",function(a){a.preventDefault();let idx=$(this).index(".chara-nav a");$("html, body").animate({scrollTop:$("#seven-chara-swiper").offset().top},500,SCROLL_EASING);charaSwiper.slideTo(idx)})}}function mediaPageScripts(){console.log("call: mediaPageScripts");$('a[href*="youtube.com/watch"]').magnificPopup({type:"iframe",iframe:{patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?rel=0&autoplay=1"}}},mainClass:"mfp-fade",removalDelay:200,preloader:false,fixedContentPos:false});let galleryThumbs=new Swiper(".gallery-thumbs",{spaceBetween:10,slidesPerView:6,freeMode:true,watchSlidesVisibility:true,watchSlidesProgress:true,breakpoints:{600:{slidesPerView:3},960:{slidesPerView:4}}});let galleryTop=new Swiper(".gallery-top",{speed:500,thumbs:{swiper:galleryThumbs},navigation:{nextEl:".gallery-top-swiper-next",prevEl:".gallery-top-swiper-prev"}})}function systemPageScripts(){console.log("call: systemPageScripts");if($("#system-cross-story-swiper").length){let crossStorySwiper=new Swiper("#system-cross-story-swiper",{effect:"fade",loop:true,speed:500,autoplay:{delay:3000},fadeEffect:{crossFade:true},pagination:{el:".system-cross-story-swiper-pagination",clickable:true}})}if($("#system-infinite-corridor-swiper").length){let infiniteSwiper=new Swiper("#system-infinite-corridor-swiper",{effect:"fade",loop:true,speed:500,autoplay:{delay:3000},fadeEffect:{crossFade:true},pagination:{el:".system-infinite-corridor-swiper-pagination",clickable:true}})}if($("#system-s-raid-swiper").length){let sRaidSwiper=new Swiper("#system-s-raid-swiper",{effect:"fade",loop:true,speed:500,autoplay:{delay:3000},fadeEffect:{crossFade:true},pagination:{el:".system-s-raid-swiper-pagination",clickable:true}})}if($("#system-tilfing-swiper").length){let tilfingSwiper=new Swiper("#system-tilfing-swiper",{effect:"fade",loop:true,speed:500,autoplay:{delay:3000},fadeEffect:{crossFade:true},pagination:{el:".system-tilfing-swiper-pagination",clickable:true}})}$(".choices button").on("click",function(){$(".choices button").each(function(){$(this).addClass("disabled")});$(this).addClass("selected");$(this).parent().find("img").addClass("display");let value=$(this).data("id");if(value===3){$("#quiz-right").delay(500).slideDown(750)}else{$("#quiz-wrong").delay(500).slideDown(750)}});if($("#film-1-swiper").length){let film1Swiper=new Swiper("#film-1-swiper",{loop:true,speed:60000,longSwipes:false,shortSwipes:false,simulateTouch:false,autoplay:{delay:0}})}if($("#film-2-swiper").length){let film2Swiper=new Swiper("#film-2-swiper",{loop:true,longSwipes:false,shortSwipes:false,speed:60000,simulateTouch:false,autoplay:{delay:0,reverseDirection:true}})}if($("#stalker").length){let $stalker=$("#stalker");let mouseX=0;let mouseY=0;$(document).on("mousemove",function(a){mouseX=a.pageX;mouseY=a.pageY});TweenMax.to("#stalker",0.1,{repeat:-1,onRepeat:function(){TweenMax.set($stalker,{css:{left:mouseX,top:mouseY}})}})}if($("#page-minigame-magical").length){$("#page-minigame-magical").snowfall({flakeCount:10,flakeIndex:"888",minSize:20,maxSize:150,minSpeed:0.5,maxSpeed:2,shadow:false,image:"../../assets/system/minigame/magical/kira_3.png"})}if($("#beach-renderer").length){window.beach.gyro()}}function productsPageScripts(){console.log("call: productsPageScripts");if($(".store-wrap").length){$(".store-wrap .box .image a").each(function(){$(this).append('<i class="fas fa-search"></i>')})}$('a[href*="youtube.com/watch"]').magnificPopup({type:"iframe",iframe:{patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?rel=0&autoplay=1"}}},mainClass:"mfp-fade",removalDelay:200,preloader:false,fixedContentPos:false});if($(".dlc-block .header").length){dlcHeaderPosUpdate();$(window).scroll(function(){dlcHeaderPosUpdate()})}}function dlcHeaderPosUpdate(){let winH=$(window).height();let scrTop=$(document).scrollTop();let scrBottom=scrTop+winH;$(".dlc-block .header").each(function(){let top=$(this).offset().top;let h=$(this).height();let percentage=1-(top+h-scrTop)/(scrBottom-scrTop+h);if(percentage<0){percentage=0}else{if(percentage>1){percentage=1}}$(this).css("background-position","center "+percentage*100+"%")})}function threeAndNinePageScripts(){console.log("call: threeAndNinePageScripts");generateThreeAndNine();threeSwitchLightning(false);threeSwitchMemory(false);threeSwitchThreeAndNine(true);if($("#three-nine-swiper").length){let threeNineSwiper=new Swiper("#three-nine-swiper",{effect:"coverflow",grabCursor:true,centeredSlides:true,slidesPerView:4,coverflowEffect:{rotate:10,stretch:0,depth:300,modifier:1,slideShadows:true},breakpoints:{960:{slidesPerView:2}},navigation:{nextEl:".three-nine-swiper-next",prevEl:".three-nine-swiper-prev"}});threeNineSwiper.slideTo(9,0)}}function webCampaign(){$("#campaign-form").submit(function(){$("#submit").prop("disabled",true);$("#blind").fadeIn();$("#error-msg").html("").hide();$("#campaign-form .error").each(function(){$(this).find("span").text("");$(this).hide()});let params=$("#campaign-form").serializeArray();let postData={};for(let idx in params){let key=params[idx]["name"];let value=params[idx]["value"];if(false==(key in postData)){postData[key]=value}else{if(Array.isArray(postData[key])){postData[key].push(value)}else{postData[key]=[postData[key],value]}}}console.log(postData);$.ajax({type:"POST",url:HOME_URI+"news/campaign/submit.php",data:postData,dataType:"json",success:function(b){switch(b.result){case"faild":$("#error-msg").html('<i class="fas fa-exclamation-triangle"></i> 入力内容に不備があります。').show();a(b.error_msg);break;case"error":$("#error-msg").html('<i class="fas fa-exclamation-triangle"></i> システムエラーが発生しました。['+b.error_code+"]").show();break;case"success":document.forms[0].reset();$("#campaign-form").fadeOut();$("#thx").fadeIn();break;default:break}},error:function(b){console.error(b);$("#error-msg").html('<i class="fas fa-exclamation-triangle"></i> サーバーエラーが発生しました。しばらく時間をおいてお試しください。').show()},complete:function(){$("#submit").prop("disabled",false);$("#blind").fadeOut(300,function(){$("html,body").animate({scrollTop:$(".form-wrap").offset().top},750,"swing")})}});return false});function a(b){for(let key in b){let message=b[key];$("#"+key+" .error span").text(message);$("#"+key+" .error").show()}}$("#input-optin").on("change",function(){if(this.checked){$("#submit").prop("disabled",false);$("#submit").removeClass("disabled")}else{$("#submit").prop("disabled",true);$("#submit").addClass("disabled")}})};
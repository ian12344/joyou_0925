const DEBUG_GLOBAL=!1,DISABLE_LOADING=!1,SCROLL_SPD=500,SCROLL_EASING="easeOutCubic";let threeDisabled=!1,threeRenderFlg=!1,threeAndNine=!1,progress=0,landingImgMax=imagesLoaded(".fv").images.length;console.log("landingImgMax -> "+landingImgMax);let landingLoadedCnt=0;imagesLoaded(".fv").on("progress",(function(){"use strict";landingLoadedCnt++}));let loadingIllust=document.getElementById("loading-illust"),progressTimer=null;const COOKIE_EXPIRES=31,COOKIE_NAME_THREE_DISABLED="f_hajimari_three_disabled";let cookieThreeDisabled=$.cookie(COOKIE_NAME_THREE_DISABLED);function progressMonitor(){"use strict";let progressVia;if($("#now-loading").addClass("off"),progress+=.1*(landingLoadedCnt/landingImgMax*100-progress),loadingIllust.style.opacity=progress/100*1.5+.25,progress>=100&&!0===threeRenderFlg){console.info("progressMonitor: Loading completed !"),clearInterval(progressTimer);let urlHash=location.hash;if(urlHash){if($(urlHash).length){let top=$(urlHash).offset().top;$(window).scrollTop(top-20)}}else $(window).scrollTop(0);setTimeout((function(){$(".gnav-trigger-wrap").fadeIn(1200),$("#loading-illust-wrap").addClass("loaded"),$("#loading-wrap").animate({opacity:0},1200,"easeInCirc",(function(){$(this).css("display","none")}))}),500)}progress+=.51,progress>99.9&&(progress=100)}function hex(text){"use strict";let bytes1,hex_str1;return bytesToHexString(stringToUtf8Bytes(text))}function byteToHex(byteNum){"use strict";let digits=byteNum.toString(16);return byteNum<16?"0"+digits:digits}function stringToUtf8Bytes(text){"use strict";let result=[];if(null===text)return result;for(let i=0;i<text.length;i++){let c=text.charCodeAt(i);c<=127?result.push(c):c<=2047?(result.push(c>>6&31|192),result.push(63&c|128)):(result.push(c>>12&15|224),result.push(c>>6&63|128),result.push(63&c|128))}return result}function bytesToHexString(bytes){"use strict";let result="";for(let i=0;i<bytes.length;i++)result+=byteToHex(bytes[i]);return result}$((function(){"use strict";progressTimer=setInterval(progressMonitor,20),$(".menu-trigger").on("click",(function(e){e.preventDefault(),$(this).toggleClass("active"),$(".b-top, .b-btm").toggleClass("active"),$("nav.gnav").toggleClass("close"),$(".gnav-wrap").fadeToggle(250,(function(){$("nav.gnav").toggleClass("active"),$(".gnav-block").toggleClass("active")}))})),$(".gnav-trigger-wrap .text").on("click",(function(){$(".menu-trigger").click()})),$("nav li a, .nav-a").on("click",(function(){$(".menu-trigger").click()})),$("nav li a").each((function(){$(this).hasClass("new")&&$(this).append('<div class="new">NEW</div>')})),cookieThreeDisabled&&(threeDisabled=!0,$("#btn-three-off").removeClass("active"),$("#btn-three-on").addClass("active")),$("#btn-three-off").on("click",(function(e){console.info("config: three enable"),e.preventDefault(),$(this).addClass("active"),$("#btn-three-on").removeClass("active"),threeDisabled=!1,$.removeCookie(COOKIE_NAME_THREE_DISABLED,{path:"/",domain:DOMAIN})})),$("#btn-three-on").on("click",(function(e){console.info("config: three disable"),e.preventDefault(),$(this).addClass("active"),$("#btn-three-off").removeClass("active"),threeDisabled=!0,!1===OPTOUT&&$.cookie(COOKIE_NAME_THREE_DISABLED,1,{expires:31,path:"/",domain:DOMAIN,secure:!0})}));let links=document.querySelectorAll("a[href]"),cbk=function(e){e.currentTarget.href===window.location.href&&(e.preventDefault(),e.stopPropagation(),$("html, body").stop().animate({scrollTop:0},500,SCROLL_EASING))};for(var i=0;i<links.length;i++)links[i].addEventListener("click",cbk);(navigator.userAgent.match(/MSIE 10/i)||navigator.userAgent.match(/Trident\/7\./)||navigator.userAgent.match(/Edge\/12\./))&&$("body").on("mousewheel",(function(){event.preventDefault();let wd=event.wheelDelta,csp=window.pageYOffset;window.scrollTo(0,csp-wd)}))})),$((function(){"use strict";let $transition=$("#transition-wrap"),ToppageBarba,NewsBarba,StoryBarba,MediaBarba,SystemBarba,ProductsBarba,threeAndNineBarba;Barba.BaseView.extend({namespace:"page-toppage",onEnter:function(){threeAndNine=!1,topPageScripts()},onEnterCompleted:function(){console.log("onEnterCompleted")}}).init(),Barba.BaseView.extend({namespace:"page-news",onEnter:function(){threeAndNine=!1,newsPageScripts()}}).init(),Barba.BaseView.extend({namespace:"page-story",onEnter:function(){threeAndNine=!1,storyPageScripts()}}).init(),Barba.BaseView.extend({namespace:"page-media",onEnter:function(){threeAndNine=!1,mediaPageScripts()}}).init(),Barba.BaseView.extend({namespace:"page-system",onEnter:function(){threeAndNine=!1,systemPageScripts()}}).init(),Barba.BaseView.extend({namespace:"page-products",onEnter:function(){threeAndNine=!1,productsPageScripts()}}).init(),Barba.BaseView.extend({namespace:"page-3and9",onEnter:function(){threeAndNine=!0,threeAndNinePageScripts()}}).init();let transition=Barba.BaseTransition.extend({start:function(){console.time("Barba: BaseTransition"),$transition.stop().fadeIn(250),threeGlitchSwitch(!0),$("#barba-wrapper, .gwrap").addClass("trans"),$(document).snowfall("clear"),Promise.all([this.newContainerLoading,this.loadOut()]).then(this.loadIn.bind(this))},loadOut:function(resolve){return $(this.oldContainer).animate({opacity:0}).promise()},loadIn:function(){let _this=this,$el=$(this.newContainer);$(this.oldContainer).hide(),$el.css({visibility:"visible",opacity:0}),threeGlitchSwitch(!1),!0===threeAndNine?(threeSwitchLightning(!1),threeSwitchMemory(!1),threeSwitchThreeAndNine(!0)):(threeSwitchLightning(!0),threeSwitchMemory(!0),threeSwitchThreeAndNine(!1));let length=imagesLoaded(".fv").images.length;console.log("first view "+length+" images"),imagesLoaded(".fv",{background:!0},(function(){$("html, body").stop().animate({scrollTop:0},0),$("#barba-wrapper, .gwrap").removeClass("trans"),$transition.stop().fadeOut(250),$el.animate({opacity:1},250,(function(){_this.done(),console.timeEnd("Barba: BaseTransition")}))}))}});Barba.Pjax.start(),Barba.Prefetch.init(),Barba.Pjax.getTransition=function(){return transition},Barba.Dispatcher.on("newPageReady",(function(currentStatus,oldStatus,container,newPageRawHTML){if(1===Barba.HistoryManager.history.length)return;let head=document.head,newPageRawHead=newPageRawHTML.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0],newPageHead=document.createElement("head");newPageHead.innerHTML=newPageRawHead;let removeHeadTags=["meta[name='keywords']","meta[name='description']","meta[property^='og']","meta[name^='twitter']","meta[itemprop]","link[rel='canonical']"].join(","),headTags=head.querySelectorAll(removeHeadTags);for(let i=0;i<headTags.length;i++)head.removeChild(headTags[i]);let newHeadTags=newPageHead.querySelectorAll(removeHeadTags);for(let i=0;i<newHeadTags.length;i++)head.appendChild(newHeadTags[i]);!1===OPTOUT&&gtag("config","UA-147551111-9",{page_path:location.pathname})}))}));
window.beach={renderer:null,camera:null,controls:null,startButton:document.getElementById("start-button"),element:document.getElementById("beach-renderer"),wrapElem:document.getElementById("beach-renderer-wrap"),clock:new THREE.Clock,textureLoader:new THREE.TextureLoader,scene:new THREE.Scene,hasGyro:!1,resGyro:!1,setup:function(){"use strict";window.beach.startButton=document.getElementById("start-button"),window.beach.element=document.getElementById("beach-renderer"),window.beach.wrapElem=document.getElementById("beach-renderer-wrap")},gyro:function(){"use strict";window.beach.setup(),window.DeviceOrientationEvent&&"ontouchstart"in window&&(window.beach.hasGyro=!0),window.beach.hasGyro?(window.addEventListener("deviceorientation",window.beach.doGyro,!1),setTimeout((function(){window.beach.resGyro?(window.beach.resGyro=!0,window.beach.wrapElem.classList.add("wait"),window.beach.startButton.onclick=function(){window.beach.wrapElem.classList.remove("wait"),window.beach.init()}):"function"==typeof DeviceOrientationEvent.requestPermission?(window.beach.wrapElem.classList.add("wait"),window.beach.startButton.onclick=function(){window.beach.wrapElem.classList.remove("wait"),DeviceOrientationEvent.requestPermission().then(res=>{"granted"===res?(window.beach.resGyro=!0,window.beach.init()):(window.beach.hasGyro=!1,window.beach.init())})}):(window.beach.resGyro=!0,window.beach.init())}),300)):(window.beach.init(),window.beach.wrapElem.addEventListener("mousedown",window.beach.orbitNav,!1))},doGyro:function(){"use strict";window.beach.resGyro=!0,window.removeEventListener("deviceorientation",window.beach.doGyro,!1)},orbitNav:function(){"use strict";document.getElementById("pc-icon").style.display="none",window.beach.wrapElem.removeEventListener("mousedown",window.beach.orbitNav,!1)},init:function(){"use strict";window.addEventListener("resize",window.beach.onResize,!1);let w=window.beach.element.clientWidth,h=window.beach.element.clientHeight;window.beach.scene=new THREE.Scene;try{window.beach.renderer=new THREE.WebGLRenderer({antialias:!0}),window.beach.renderer.setClearColor(new THREE.Color(0)),window.beach.renderer.setSize(w,h),window.beach.renderer.shadowMap.enabled=!0,window.beach.element.appendChild(window.beach.renderer.domElement)}catch(e){return void console.error(e)}window.beach.camera=new THREE.PerspectiveCamera(45,w/h,.1,1e3),window.beach.camera.position.set(0,0,.1),window.beach.resGyro?(window.beach.controls=new THREE.DeviceOrientationControls(window.beach.camera),window.beach.controls.connect()):(window.beach.controls=new THREE.OrbitControls(window.beach.camera,window.beach.renderer.domElement),window.beach.controls.enablePan=!1,window.beach.controls.enableZoom=!1,window.beach.controls.enableDamping=!0,window.beach.controls.rotateSpeed=.2,window.beach.controls.dampingFactor=.15,window.beach.controls.minPolarAngle=.3*Math.PI,window.beach.controls.maxPolarAngle=.7*Math.PI,window.beach.controls.minAzimuthAngle=.2*-Math.PI,window.beach.controls.maxAzimuthAngle=.14*Math.PI,document.getElementById("pc-icon").style.display="flex"),window.beach.controls.update();let params,musse,file="altina.jpg";"love"===new URL(document.location).searchParams.get("musse")&&(file="musse.jpg");let texture=window.beach.textureLoader.load(HOME_URI+"assets/system/minigame/beach/vr/"+file);texture.minFilter=THREE.LinearFilter;let geom=new THREE.SphereGeometry(32,32,32,0,Math.PI,.05*Math.PI,.9*Math.PI),mat=new THREE.MeshPhongMaterial({map:texture,side:THREE.DoubleSide}),mesh=new THREE.Mesh(geom,mat);mesh.position.z=3,mesh.rotation.set(0,-Math.PI,0),window.beach.scene.add(mesh);let ambientLight=new THREE.AmbientLight(16777215,1);window.beach.scene.add(ambientLight),this.render()},render:function(){"use strict";requestAnimationFrame(window.beach.render),window.beach.renderer.render(window.beach.scene,window.beach.camera);let delta=window.beach.clock.getDelta();window.beach.controls.update(delta)},onResize:function(){"use strict";let h=window.beach.element.clientHeight,w=window.beach.element.clientWidth;window.beach.camera.aspect=w/h,window.beach.camera.updateProjectionMatrix(),window.beach.renderer.setSize(w,h)}};